(function(){var apply,invoker,map,partialRight,pipeP,prop,sortBy,tap,trim,ref$,a,button,div,footer,header,h1,label,li,option,select,span,ul,PT,linkSelector,domParser,domFromHtmlStr,fetchCorsDomFromUrl,ShowListItem,ShowList,slice$=[].slice;apply=R.apply,invoker=R.invoker,map=R.map,partialRight=R.partialRight,pipeP=R.pipeP,prop=R.prop,sortBy=R.sortBy,tap=R.tap,trim=R.trim,ref$=React.DOM,a=ref$.a,button=ref$.button,div=ref$.div,footer=ref$.footer,header=ref$.header,h1=ref$.h1,label=ref$.label,li=ref$.li,option=ref$.option,select=ref$.select,span=ref$.span,ul=ref$.ul,PT=React.PropTypes,linkSelector="#mega_main_menu .mega_dropdown>.menu-item:not(.menu-item-has-children)>.item_link",domParser=new DOMParser,domFromHtmlStr=function(str){return domParser.parseFromString(str,"text/html")},fetchCorsDomFromUrl=function(url){var corsUrl;return corsUrl="https://crossorigin.me/"+url,function(){var pipeline;return pipeline=slice$.call(arguments),apply(pipeP,[partialRight(fetch,[{mode:"cors"}]),invoker(0,"text"),domFromHtmlStr].concat(pipeline))(corsUrl)}},ShowListItem=React.createClass({display:"ShowListItem",propTypes:{data:PT.objectOf(PT.string)},getInitialState:function(){return{isLoading:!1}},fetchStream:function(e){var this$=this;return e.preventDefault(),e.target.blur(),this.setState({isLoading:!0}),fetchCorsDomFromUrl(this.props.data.url)(function(dom){return dom.querySelector(".flowplayer video>source[src*=rtmp]")},prop("src"),function(src){return this$.setState({isLoading:!1}),src?window.open(src,"_self"):void 0})},render:function(){return li({className:"asl-list-item"},[a({className:"asl-list-link",href:this.props.data.url,target:"_blank",onClick:this.fetchStream},[span(null,this.props.data.title),this.state.isLoading?span({className:"asl-list-item-spinner"},"❋"):void 0])])}}),ShowList=React.createClass({displayName:"ShowList",propTypes:{shows:PT.objectOf(PT.string)},getInitialState:function(){return{loadingState:0,settingsVisible:!1,showData:{}}},componentDidMount:function(){var storedTheme,this$=this;return storedTheme=window.localStorage.getItem("asl-color-theme"),storedTheme&&this.setState({colorTheme:storedTheme},this.handleDocTheme),fetchCorsDomFromUrl("https://www.arconaitv.me/")(function(dom){return dom.querySelectorAll(linkSelector)},map(function(el){return{title:trim(el.textContent),url:el.href}}),sortBy(prop("title")),function(showData){return this$.setState({loadingState:2,showData:showData})})},handleClickOutside:function(e){return e.preventDefault(),e.stopPropagation(),e.target.closest(".asl-settings-dialog")?void 0:this.toggleSettings()},toggleSettings:function(e){var isVisible;return isVisible=!this.state.settingsVisible,document.documentElement[isVisible?"addEventListener":"removeEventListener"]("click",this.handleClickOutside,!1),this.setState({settingsVisible:isVisible})},handleDocTheme:function(){return"dark"===this.state.colorTheme?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},changeColorTheme:function(e){var theme;return theme=e.target.value,window.localStorage.setItem("asl-color-theme",theme),this.setState({colorTheme:theme},this.handleDocTheme)},render:function(){return 0===this.state.loadingState?div(null,"Loading..."):1===this.state.loadingState?div(null,"Error"):div(null,[header({className:"asl-header"},[h1(null,"Arconai Tv Stream Links"),button({className:"asl-settings-btn",type:"button",onClick:this.toggleSettings},"⚙")]),this.state.settingsVisible?div({className:"asl-settings-dialog"},[label(null,[span(null,"Color theme: "),select({value:this.state.colorTheme?this.state.colorTheme:"light",onChange:this.changeColorTheme},[option({value:"light"},"Light"),option({value:"dark"},"Dark")])])]):void 0,ul({className:"asl-list"},map(function(showData){return React.createElement(ShowListItem,{data:showData})},this.state.showData)),footer({className:"asl-footer"},[span(null,"All streams are from "),a({href:"https://www.arconaitv.me/",target:"_blank"},"Arconai Tv"),span(null,". I'm sure they'd appreciate your "),a({href:"https://shop.stwhy.com/",target:"_blank"},"donation"),span(null,".")])])}}),React.render(React.createElement(ShowList),document.getElementById("app"))}).call(this);
